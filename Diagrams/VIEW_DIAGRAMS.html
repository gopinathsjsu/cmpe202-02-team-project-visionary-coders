<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campus Marketplace - UML & Sequence Diagrams</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }
        
        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        header p {
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        .diagram-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .diagram-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow-x: auto;
        }
        
        .diagram-card h2 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        .diagram-card p {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 15px;
        }
        
        .mermaid {
            display: flex;
            justify-content: center;
            padding: 20px 0;
        }
        
        .download-section {
            background: white;
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            margin-top: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .download-section h2 {
            color: #667eea;
            margin-bottom: 20px;
        }
        
        .download-btn {
            background: #667eea;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 5px;
            font-size: 1em;
            cursor: pointer;
            margin: 10px;
            transition: background 0.3s;
        }
        
        .download-btn:hover {
            background: #764ba2;
        }
        
        footer {
            text-align: center;
            color: white;
            margin-top: 40px;
            padding: 20px;
        }
        
        .stats {
            background: rgba(255,255,255,0.1);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .stats p {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üè™ Campus Marketplace (Campify)</h1>
            <p>UML & Sequence Diagrams - CMPE 202 Project</p>
        </header>
        
        <div class="stats">
            <p><strong>Total Diagrams:</strong> 15</p>
            <p><strong>Categories:</strong> Class | Component | Deployment | Sequences | State | ERD | Use Cases | Activity</p>
            <p><strong>Team:</strong> Visionary Coders | <strong>Date:</strong> December 4, 2025</p>
        </div>

        <div class="diagram-grid">
            <!-- 1. Class Diagram -->
            <div class="diagram-card">
                <h2>01. Class Diagram</h2>
                <p>üìä Shows all data entities (User, Listing, ChatRoom, Message, Report, Admin) and their relationships</p>
                <div class="mermaid">
classDiagram
    class User {
        +UUID id
        +String email
        +register()
        +login()
    }
    class Listing {
        +UUID id
        +UUID seller_id
        +String title
        +Decimal price
        +create()
    }
    class ChatRoom {
        +UUID id
        +getHistory()
    }
    class Message {
        +UUID id
        +String content
        +sendMessage()
    }
    User "1" --> "*" Listing
    User "1" --> "*" ChatRoom
    ChatRoom "1" --> "*" Message
                </div>
            </div>

            <!-- 2. Registration Sequence -->
            <div class="diagram-card">
                <h2>02. Registration & Login</h2>
                <p>üîê User registration flow with college email validation and JWT token generation</p>
                <div class="mermaid">
sequenceDiagram
    participant User
    participant Frontend
    participant Backend
    participant DB
    
    User->>Frontend: Enter credentials
    Frontend->>Backend: POST /auth/register
    Backend->>DB: Create user
    DB-->>Backend: Success
    Backend-->>Frontend: JWT token
    Frontend-->>User: Logged in!
                </div>
            </div>

            <!-- 3. Create Listing -->
            <div class="diagram-card">
                <h2>03. Create Listing</h2>
                <p>üìù Seller creates marketplace listing with photo uploads</p>
                <div class="mermaid">
sequenceDiagram
    participant Seller
    participant Frontend
    participant Backend
    participant S3
    participant DB
    
    Seller->>Frontend: Fill form + photos
    Frontend->>Backend: POST /listings
    Backend->>S3: Upload photos
    S3-->>Backend: URLs
    Backend->>DB: Create listing
    DB-->>Backend: Success
    Backend-->>Frontend: Listing created
                </div>
            </div>

            <!-- 4. NLP Search -->
            <div class="diagram-card">
                <h2>04. NLP Search</h2>
                <p>ü§ñ Natural language search with ChatGPT parsing</p>
                <div class="mermaid">
sequenceDiagram
    participant Buyer
    participant Frontend
    participant Backend
    participant OpenAI
    participant DB
    
    Buyer->>Frontend: "Laptop $400-600"
    Frontend->>Backend: POST /search/nl
    Backend->>OpenAI: Parse query
    OpenAI-->>Backend: Extracted params
    Backend->>DB: Query with filters
    DB-->>Backend: Results
    Backend-->>Frontend: Top 20 results
                </div>
            </div>

            <!-- 5. Real-Time Chat -->
            <div class="diagram-card">
                <h2>05. Real-Time Chat</h2>
                <p>üí¨ WebSocket-based messaging between buyer and seller</p>
                <div class="mermaid">
sequenceDiagram
    participant Buyer
    participant FB as Frontend-B
    participant Backend
    participant FS as Frontend-S
    participant Seller
    
    Buyer->>FB: Click contact
    FB->>Backend: WS /chat/room
    Backend-->>FB: Connected
    Seller->>FS: Open chat
    FS->>Backend: WS /chat/room
    Backend-->>FS: Connected
    Buyer->>FB: Send message
    FB->>Backend: WebSocket
    Backend->>FS: Broadcast
    FS-->>Seller: Show message
                </div>
            </div>

            <!-- 6. Admin Moderation -->
            <div class="diagram-card">
                <h2>06. Admin Moderation</h2>
                <p>‚öñÔ∏è Content moderation and report resolution workflow</p>
                <div class="mermaid">
sequenceDiagram
    participant Buyer
    participant Frontend
    participant Backend
    participant Admin
    
    Buyer->>Frontend: Report listing
    Frontend->>Backend: POST /reports
    Backend-->>Frontend: Submitted
    Admin->>Backend: GET /admin/dashboard
    Backend-->>Admin: Show reports
    Admin->>Backend: Resolve report
    Backend-->>Admin: Confirmed
                </div>
            </div>

            <!-- 7. Deployment -->
            <div class="diagram-card">
                <h2>07. Deployment Architecture</h2>
                <p>üåê AWS cloud infrastructure with auto-scaling</p>
                <div class="mermaid">
graph TB
    Internet["üë• Users"]
    Route53["Route 53<br/>DNS"]
    ALB["Load Balancer"]
    EC2["EC2 Instance<br/>Docker"]
    RDS["RDS<br/>PostgreSQL"]
    S3["S3 Bucket<br/>Media"]
    
    Internet-->Route53
    Route53-->ALB
    ALB-->EC2
    EC2-->RDS
    EC2-->S3
                </div>
            </div>

            <!-- 8. Listing States -->
            <div class="diagram-card">
                <h2>08. Listing Lifecycle</h2>
                <p>üìä State transitions for marketplace listings</p>
                <div class="mermaid">
stateDiagram-v2
    [*] --> Draft
    Draft --> Published
    Published --> Active
    Active --> Available
    Available --> Sold
    Available --> Reported
    Reported --> Removed
    Sold --> [*]
    Removed --> [*]
                </div>
            </div>

            <!-- 9. Use Cases -->
            <div class="diagram-card">
                <h2>09. Use Cases</h2>
                <p>üë• User interactions by role (Buyer, Seller, Admin)</p>
                <div class="mermaid">
graph TB
    B["üë§ Buyer"]
    S["üë®‚Äçüè´ Seller"]
    A["üë®‚Äçüíº Admin"]
    
    B-->B1["Register/Login"]
    B-->B2["Search"]
    B-->B3["Chat"]
    B-->B4["Report"]
    
    S-->S1["Register/Login"]
    S-->S2["Create Listing"]
    S-->S3["Upload Photos"]
    S-->S4["Chat"]
    
    A-->A1["Login"]
    A-->A2["Dashboard"]
    A-->A3["Moderate"]
    A-->A4["Manage Users"]
                </div>
            </div>

            <!-- 10. Component Diagram -->
            <div class="diagram-card">
                <h2>10. System Architecture</h2>
                <p>üèóÔ∏è Frontend, Backend, Data, and External services</p>
                <div class="mermaid">
graph LR
    UI["React"]
    API["FastAPI"]
    DB["Database"]
    OpenAI["OpenAI API"]
    
    UI-->API
    API-->DB
    API-->OpenAI
                </div>
            </div>
        </div>

        <div class="download-section">
            <h2>üì• Download All Diagrams</h2>
            <p>View these diagrams in high quality</p>
            <button class="download-btn" onclick="downloadMermaid()">Download as Mermaid Files (.mmd)</button>
            <button class="download-btn" onclick="viewOnline()">View on Mermaid Live</button>
            <p style="margin-top: 20px; color: #666; font-size: 0.9em;">
                üí° Tip: Use Mermaid Live Editor (mermaid.live) for best PNG export quality
            </p>
        </div>

        <footer>
            <p>üéì CMPE 202 - Campus Marketplace Project | Team: Visionary Coders | December 4, 2025</p>
            <p>‚úÖ All diagrams are fully responsive and interactive</p>
        </footer>
    </div>

    <script>
        mermaid.initialize({ startOnLoad: true, theme: 'default' });
        mermaid.contentLoaded();

        function downloadMermaid() {
            alert('Download the UML_Sequence_Diagrams_MermaidFiles.zip to get all .mmd files');
        }

        function viewOnline() {
            window.open('https://mermaid.live', '_blank');
        }
    </script>
</body>
</html>
